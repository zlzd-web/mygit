<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hnjd.mapper.CompositionMapper">
	<select id="queryComposition" resultMap="compositionMap">
	   SELECT composition_id,composition_name,composition_brief,competitor.`author_id`,author,author_phone,author_school FROM composition JOIN competitor ON composition.`author_id` = competitor.`author_id`
	   <where>
	      <if test="composition_name != null and composition_name !=''">
	         or composition_name=#{composition_name}
	      </if>
	      <if test="author_id != null and author_id!=''">
	         or competitor.author_id=#{author_id}
	      </if> 
	      <if test="author != null and author!=''">
	         or author=#{author}
	      </if>
	   </where>
	</select>
	<resultMap type="com.hnjd.pojo.Composition" id="compositionMap">
	   <id property="composition_id" column="composition_id"/>
	   <result property="composition_name" column="composition_name" />
	   <result property="composition_brief" column="composition_brief"/>
	   <association property="competitor">
	       <id property="author_id" column="author_id"/>
	       <result property="author" column="author"/>
	       <result property="author_phone" column="author_phone"/>
	       <result property="author_school" column="author_school"/>
	   </association>
	</resultMap>
</mapper>